<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="shortcut icon" href="images/favicon-32x32.png" type="image/x-icon">
  <title>Time Tracking Dashboard</title>
</head>

<body class="bg-[#0f1424] md:flex min-h-screen items-center justify-center">

  <div class="flex flex-col md:flex-row gap-5 text-[#bdc1ff] my-4 mx-2 rounded-2xl">
    <div class="bg-[#1c1f4a] rounded-2xl overflow-hidden md:max-w-[15rem]">
      <div class="rounded-2xl px-7 py-5 bg-[#5847eb] flex flex-row md:flex-col">
        <img src="images/image-jeremy.png" alt="image-jeremy" class="h-20 w-20 border-4 rounded-full mr-6">
        <div class="flex flex-col justify-center mt-8 mb-12">
          <p>Report for</p>
          <h1 class="text-4xl text-white">Jeremy Robson</h1>
        </div>
      </div>
      <div class="px-7 py-5 gap-3 flex flex-row md:flex-col items-start">
        <button class="time-frame-btn" data-time-frame="daily">Daily</button>
        <button class="time-frame-btn" data-time-frame="weekly">Weekly</button>
        <button class="time-frame-btn" data-time-frame="monthly">Monthly</button>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 md:min-w-[50rem] gap-5 report-box">

    </div>
  </div>


  <script>
    let loadedData = [];
    let currentPeriod = 'daily'
    const bgColors = ['#ff8c66', '#56c2e6', '#ff5c7c', '#4acf81', '#7536d3', '#f1c65b']

    const reportBox = document.querySelector('.report-box');
    const timeFramesBtns = document.querySelectorAll('.time-frame-btn')

    document.addEventListener('DOMContentLoaded', async () => {
      loadedData = await fetch('data.json').then(response => response.json());
      renderData();
    })

    function renderData() {
      reportBox.innerHTML = ''
      loadedData.forEach((data, index) => {
        const newDiv = document.createElement('div');
        newDiv.classList.add('rounded-2xl', 'relative', 'h-[12.9rem]', `bg-[${bgColors[index]}]`, 'flex', 'items-end', 'overflow-hidden')
        newDiv.innerHTML = `
          <img src="images/icon-${data.title.toLowerCase().split(' ').join('-')}.svg" class="absolute right-4 -top-1 z-1">
          <div class="bg-[#1c1f4a] rounded-2xl p-5 relative w-full z-2">
            <div class="flex items-center justify-between text-white">
              <p>${data.title}</p>
              <img src="images/icon-ellipsis.svg" alt="icon-ellipsis" class="">
            </div>
            <h1 class="text-4xl text-white mt-3 mb-1">
              ${data['timeframes'][currentPeriod]['current']}hrs
            </h1>
            <p>
              ${currentPeriod == 'daily' ? 'yesterday' : currentPeriod == 'weekly' ? 'Last Week' : 'Last Month'} - ${data['timeframes'][currentPeriod]['previous']}hrs
            </p>
          </div>
        `
        reportBox.appendChild(newDiv)
      });
    }

    timeFramesBtns.forEach(timeFramesBtn => {
      timeFramesBtn.addEventListener('click', function () {
        timeFramesBtns.forEach(tfBtn => {
          tfBtn.classList.remove('text-white')
        })
        this.classList.add('text-white')
        currentPeriod = this.dataset.timeFrame
        renderData()
      })
    })
  </script>
</body>

</html>